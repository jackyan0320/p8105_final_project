---
title: ""
output: 
  html_document:
     theme:  united
     includes:
        after_body: footer.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#install.packages("DT")
library(DT)
library(tidyverse)
```

<div style="margin-bottom:30px;">
</div>

# Our data

<div style="margin-bottom:20px;"> </div>

New York State organ donor data was pulled from New York's official public data [API](https://health.data.ny.gov/Health/Donate-Life-Organ-and-Tissue-Donor-Registry-Enroll/sqk8-8a2h/data?fbclid=IwAR0DjHPMd3up76Cq1bMH0z12f_vr4rLz5YwtMPcT2kc_a5nP-nVJlDEinNE). 

Extra county level data came from Area Health Resources Files (AHRF). AHRF data collects healthcare related information and demographics at the county level for every county in the United States. Specific variables were chosen from AHRF to be included in this analysis. AHRF data is available online. 

[Click here for all cleaned data used for analyses](https://www.dropbox.com/sh/grlugs9hrksvkqr/AAAwILSg5UyMrW1CD7dWmHPNa?dl=0)

Organ donor data used for analyses can be viewed below:

<div style="margin-bottom:30px;"> </div>

```{r ,include=FALSE}
organ = read_csv("data/organ.csv")
organ_tidy = 
  organ %>% 
  separate(location, c("lat", "long"), sep = ",") %>% 
  mutate(long = str_replace(long, "\\)", ""),
         long = as.numeric(long)) %>% 
  mutate(lat = str_replace(lat, "\\(", ""),
         lat = as.numeric(lat)) %>% 
  select(date, county, eligible_population_enrolled, population_18_estimate, registry_enrollments, opo) %>% 
  rename(registry_proportion = eligible_population_enrolled) %>% 
  mutate(opo = as.factor(opo),
         county = as.factor(county)) %>% 
  mutate(opo = fct_recode(opo, 
                          NYODN = "New York Organ Donor Network", 
                          CDTNY = "Center for Donation and Transplant in New York", 
                          FLDRN = "Finger Lakes Donor Recovery Network")) %>% 
  rename(OPO = opo)
  
```

<div class="cd-fixed-bg cd-fixed-bg--1"> 
</br>
</div>
 
```{r echo=FALSE, }
donor_share_time_compare = read.csv("data/state_donor_share.csv") %>%
  janitor::clean_names() %>%
  rename(state = x)

datatable(organ_tidy, rownames = FALSE, filter = "top", 
          options = list(pageLength = 5, scrollX = T, autoWidth = TRUE))
```
     
